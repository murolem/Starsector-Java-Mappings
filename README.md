# Starsector-Java-Mappings
Java Mappings for Starsector.

Contains Mappings for Starsector obfuscated JARs to something that's humanly readable.

> [!WARNING]  
> This is a **VERY** early work-in-progress project and by no means done by a professional (I'm pretty novice at Java, obfuscation technics and modding).

## About

The main JAR that contains game-related code is `starfarer_obf.jar`. `starfarer.api.jar` is the unobfuscated version of that jar containing limited subset of code. The project aims to map out the obfuscated jar for modding purposes.

1. The mappings are first generated using Recaf and its "illegal name cleanup" feature to get rid of random unicode and super long `OOOOOOOOOOOOOOOOOOOO`-like names to something less hideous to look at (e.g: `method1364`, `field8381`, etc.).
2. The mappings then loaded into Enigma (a deubfuscator and remapper used for Minecraft modding) and manually constructed by "looking through the code and seeing what it does".
3. The mapping can then be applied by *<TODO: figure out this part>.*

## Project structure

All mappings are located in `mappings` folder, divided into game versions. Mappings have the same names as JARs except they end in `.mapping`.

"Clean" mappings with no illegal names produced by Decaf are suffixed with `__no_illegals`.

## Mapping conventions

Mappings that I'm unsure about start with `Zzz` for classes/interfaces/enums/etc. or `zzz` for class props/variables/etc (do not confuse with `zzz` package name used in the JAR namespace).

Mappings produced by Recaf (those with their names fixed) are stored as deobfuscated under project `mapped` in Enigma. They have either the generic names produced by Recaf or start with `AZzz` for classes/interfaces/enums/etc. or `aZzz` for class props/variables/etc (`A`/`a` prefix means "autogenerated"). I move them once in the while from that project into the main `com` space and remove `A`/`a` prefix.

## Applying mappings

### Enigma
To apply mappings in Enigma, first open the relevant JAR file.

Then use File > Open Mappings... > Enigma File and choose the relevant `.mapping` file.

To save mappings, use File > Save Mappings.

### Recaf GUI
To apply mappings in Recaf, first open the relevant JAR file.

Then use Mappings > Apply > Enigma and pick the `.mapping` file. If you are getting errors, try opening the mappings in Enigma and running File > Drop Invalid Mappings.

To save mappings, use Mappings > Export > Enigma.

### Game files

If only I knew... please contact me or make a pull request explaining how to do this!

## Contributing

PRs are welcome, although I'm unsure how well the mappings will merge. A some sort of merging feature is probably required for this to work... Enigma also has a collaboration feature. If you are willing, contact me or make an issue to figure this out!